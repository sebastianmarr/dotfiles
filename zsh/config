# autoload all custom functions
fpath=(~/.zsh/functions $fpath)
autoload -U ~/.zsh/functions/*(:t)

# options
setopt prompt_subst
setopt correctall
setopt autocd

# source control info
autoload -Uz vcs_info
zstyle ':vcs_info:*' enable git # only git for the moment
zstyle ':vcs_info:*' check-for-changes true # dirty indicators
zstyle ':vcs_info:*' stagedstr '%F{green}● ' # staged changes in repo
zstyle ':vcs_info:*' unstagedstr '%F{red}● ' # unstaged changes

# run vcs_info before the prompt is displayed and check for untracked files
precmd() {

  # git prompt info format
  CUSTOM_GIT_PROMPT_FORMAT='%u%c%F{red}[%F{green}%b%F{red}]%f'
  
  # check for untracked files in directory
  if [[ -z $(git ls-files --other --exclude-standard 2> /dev/null) ]] {
  } else {
    CUSTOM_GIT_PROMPT_FORMAT='%F{red}○ '$CUSTOM_GIT_PROMPT_FORMAT
  }
  
  zstyle ':vcs_info:*' formats $CUSTOM_GIT_PROMPT_FORMAT

  vcs_info
}

# environment variables
export EDITOR="mate -w"

# prompt
export PROMPT='
%F{2}%5~
%f%n@%m %F{1}$(prompt_symbol)%f '
export RPROMPT='${vcs_info_msg_0_}'

# history
HISTFILE=~/.zsh_history
HISTSIZE=1000
SAVEHIST=1000
