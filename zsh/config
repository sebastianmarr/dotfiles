# key bindings
bindkey -e

# autoload all custom functions
fpath=(~/.zsh/plugins/zsh-completions/src $fpath)
fpath=(~/.zsh/functions $fpath)
autoload -U ~/.zsh/functions/*(:t)

# options
setopt prompt_subst
setopt correctall
setopt autocd

# bash-like word movement
autoload -U select-word-style
select-word-style bash

# source control info
autoload -Uz vcs_info
zstyle ':vcs_info:*' enable git hg svn
zstyle ':vcs_info:*' check-for-changes true # dirty indicators
zstyle ':vcs_info:*' stagedstr '%F{green}*%f ' # staged changes in repo
zstyle ':vcs_info:*' unstagedstr '%F{red}*%f ' # unstaged changes
CUSTOM_GIT_PROMPT_FORMAT='%u%c%F{red}[%F{green}%b%F{red}]%f'
ACTION_PROMPT_FORMAT=$CUSTOM_GIT_PROMPT_FORMAT' %F{magenta}%a%f'
zstyle ':vcs_info:*' formats $CUSTOM_GIT_PROMPT_FORMAT
zstyle ':vcs_info:*' actionformats $ACTION_PROMPT_FORMAT

# run vcs_info before the prompt is displayed and check for untracked files
precmd() {
  vcs_info
}

# environment variables
export EDITOR="vim"
export GREP_OPTIONS='--color=auto'

# prompt
export PROMPT='%F{2}%5~
%f%n@%m %F{1}%%%f '
export RPROMPT='${vcs_info_msg_0_}'

# history
HISTFILE=~/.zsh_history
HISTSIZE=1000
SAVEHIST=1000
